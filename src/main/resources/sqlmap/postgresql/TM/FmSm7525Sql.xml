<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SM7525">

    <select id="SM7525.selectItemIntgMappingList" parameterClass="java.util.Map" resultClass="java.util.LinkedHashMap">
        <include refid="select-paging-start" />
    SELECT IIM.COMPANY_CD
          ,IIM.ITEM_CD
          ,I.ITEM_NAME
          ,IIM.ITEM_MAP_CD
          ,IIM.APPLY_DATE
          ,IIM.END_DATE
          ,IIM.DELETE_YN
      FROM ITEM_INTG_MAPPING IIM
           LEFT OUTER JOIN ITEM I
             ON I.COMPANY_CD = IIM.COMPANY_CD
            AND I.ITEM_CD = IIM.ITEM_CD
     WHERE IIM.COMPANY_CD = #COMPANY_CD#
          <isNotEmpty property="schKeyWord">
     AND UPPER($schKeyField$) <isNotEmpty property="multiData">IN($multiData$)</isNotEmpty><isEmpty property="multiData">LIKE UPPER(#schKeyWord#)</isEmpty>
      </isNotEmpty>
         <include refid="select-paging-end" />
         ORDER BY ITEM_CD   
    </select>

    <update id="SM7525.insertItemIntgMapping" parameterClass="java.util.Map">
        INSERT INTO ITEM_INTG_MAPPING(
               COMPANY_CD
              ,ITEM_CD
              ,ITEM_MAP_CD
              ,APPLY_DATE
              ,END_DATE
              ,DELETE_YN)
        VALUES(
               #COMPANY_CD#
              ,#ITEM_CD#
              ,#ITEM_MAP_CD#
              ,#APPLY_DATE#
              ,#END_DATE#
              ,#DELETE_YN#)
    </update>
    
    <update id="SM7525.updateItemIntgMapping" parameterClass="java.util.Map">
        UPDATE ITEM_INTG_MAPPING
           SET END_DATE = #END_DATE#
              ,DELETE_YN = #DELETE_YN#
         WHERE COMPANY_CD = #COMPANY_CD#
           AND ITEM_CD = #ITEM_CD#
           AND ITEM_MAP_CD = #ITEM_MAP_CD#
           AND APPLY_DATE = #APPLY_DATE#
    </update>
    
    <delete id="SM7525.deleteItemIntgMapping" parameterClass="java.util.Map">
        DELETE FROM ITEM_INTG_MAPPING
        WHERE COMPANY_CD = #COMPANY_CD#
          AND ITEM_CD = #ITEM_CD#
          AND ITEM_MAP_CD = #ITEM_MAP_CD#
          AND APPLY_DATE = #APPLY_DATE#
    </delete>

</sqlMap>